# Gromo Performance Optimization Configuration

# Node.js Performance Settings
NODE_ENV=production
NODE_OPTIONS="--max-old-space-size=2048 --max-semi-space-size=128"

# Express.js Optimizations
EXPRESS_TRUST_PROXY=true
EXPRESS_VIEW_CACHE=true
EXPRESS_TEMPLATE_CACHE=true

# MongoDB Connection Pool Settings
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=5
MONGODB_MAX_IDLE_TIME_MS=30000
MONGODB_SOCKET_TIMEOUT_MS=30000
MONGODB_SERVER_SELECTION_TIMEOUT_MS=5000
MONGODB_HEARTBEAT_FREQUENCY_MS=10000

# Redis Configuration
REDIS_MAX_CLIENTS=100
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru
REDIS_LAZY_FREE=yes
REDIS_CONNECTION_POOL_SIZE=20

# Cache Settings
CACHE_TTL_DEFAULT=3600
CACHE_TTL_SHORT=300
CACHE_TTL_LONG=86400
CACHE_MAX_SIZE=100000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESS_REQUESTS=false

# File Upload Limits
MAX_FILE_SIZE=10485760
MAX_FILES_PER_REQUEST=5

# API Response Compression
COMPRESSION_THRESHOLD=1024
COMPRESSION_LEVEL=6

# Worker Process Settings
CLUSTER_WORKERS=0  # 0 = auto (CPU cores)
WORKER_TIMEOUT=30000

# Security Headers
HELMET_CSP_ENABLED=true
HELMET_HSTS_MAX_AGE=31536000

# Logging Performance
LOG_LEVEL=info
LOG_MAX_FILES=30
LOG_MAX_SIZE=10mb

# Health Check Intervals
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Database Query Optimization
DB_QUERY_TIMEOUT=5000
DB_BULK_WRITE_SIZE=1000
DB_INDEX_BACKGROUND=true

# API Pagination
API_DEFAULT_PAGE_SIZE=20
API_MAX_PAGE_SIZE=100

# JWT Token Settings
JWT_EXPIRY=3600
JWT_REFRESH_EXPIRY=604800

# Queue Processing
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=5000

# Monitoring and Metrics
METRICS_COLLECTION_INTERVAL=10000
ENABLE_REQUEST_METRICS=true
ENABLE_BUSINESS_METRICS=true

# CDN and Static Assets
STATIC_CACHE_MAX_AGE=31536000
CDN_ENABLED=false
CDN_BASE_URL=""

# Database Connection Optimization
DB_READ_PREFERENCE=secondaryPreferred
DB_WRITE_CONCERN_W=majority
DB_WRITE_CONCERN_J=true

# Voice Processing Optimization
VOICE_PROCESSING_TIMEOUT=30000
VOICE_PROCESSING_CONCURRENCY=3
VOICE_MAX_FILE_SIZE=52428800

# OCR Processing Settings
OCR_PROCESSING_TIMEOUT=20000
OCR_MAX_IMAGE_SIZE=20971520
OCR_IMAGE_QUALITY=85

# Email and Notification Queues
EMAIL_QUEUE_CONCURRENCY=10
NOTIFICATION_QUEUE_CONCURRENCY=15
SMS_QUEUE_CONCURRENCY=5

# Auto-scaling Thresholds
CPU_SCALE_UP_THRESHOLD=70
CPU_SCALE_DOWN_THRESHOLD=30
MEMORY_SCALE_UP_THRESHOLD=80
MEMORY_SCALE_DOWN_THRESHOLD=40
